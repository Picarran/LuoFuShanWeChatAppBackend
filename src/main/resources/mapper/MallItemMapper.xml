<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.luofushan.dao.mapper.MallItemMapper">

    <select id="selectMallItemList" resultType="com.example.luofushan.dto.resp.MallItemListResp">
        SELECT
            id,
            name,
            cover_img AS coverImg,
            points_cost AS pointsCost,
            created_at AS createdAt
        FROM mall_item
        WHERE delflag = 0
        <choose>
            <when test="sort == 'points_desc'">
                ORDER BY points_cost DESC
            </when>
            <otherwise>
                ORDER BY points_cost ASC
            </otherwise>
        </choose>
        LIMIT #{offset}, #{size}
    </select>

    <select id="countMallItems" resultType="int">
        SELECT COUNT(*)
        FROM mall_item
        WHERE delflag = 0
    </select>

</mapper>